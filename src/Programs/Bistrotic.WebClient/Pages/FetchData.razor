@page "/fetchdata"
@inject HttpClient Http

<h1>Weather forecast</h1>

<p>This component demonstrates fetching data from the server.</p>

@if (units == null)
{
<p><em>Loading...</em></p>
}
else
{
<table class="table">
	<thead>
		<tr>
			<th>Id</th>
			<th>Name</th>
		</tr>
	</thead>
	<tbody>
		@foreach (var unit in units)
			{
		<tr>
			<td>@unit.Id</td>
			<td>@unit.Name</td>
		</tr>
		}
	</tbody>
</table>
}

@code {
	private UnitSummaryInformations[]? units = null;

	protected override async Task OnInitializedAsync()
	{
		const string url = "queries/" + nameof(GetUnitSummaryInformationsList);
		string response = await Http.GetStringAsync(url);
		Console.WriteLine(url);
		Console.WriteLine(response);
		//units = await Http.GetFromJsonAsync<IEnumerable<UnitSummaryInformations>>(url);
	}

}
